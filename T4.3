import { useState, useEffect, useCallback } from 'react';

function useFetch(url){
  const [data, setData] = useState(null);
const [loading, setLoading] = useState(false);
const [error, setError] = useState(null);

const fetchData=useCallback(async()=>{
  try{
    
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    const json = await response.json();
    setData(json);
  }catch(err){
 setError(err.message)
  }finally{
setLoading(false);
  }
})

useEffect(()=>{
  if(url) {
    fetchData()
  }
},[url,fetchData])

return {data,loading,error,refetch:fetchData}

}

export default useFetch;
